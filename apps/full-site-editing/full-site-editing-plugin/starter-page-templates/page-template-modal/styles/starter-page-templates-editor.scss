@mixin screen-reader-text() {
	border: 0;
	clip: rect( 1px, 1px, 1px, 1px );
	clip-path: inset( 50% );
	height: 1px;
	margin: -1px;
	overflow: hidden;
	padding: 0;
	position: absolute;
	width: 1px;
	word-wrap: normal !important;
}

$template-selector-border-color: #a1aab2;
$template-selector-empty-background: #f6f6f6;

// Modal Overlay
.page-template-modal-screen-overlay {
	animation: none;
}

// When not in fullscreen mode allow space for WP.org sidebar
body:not( .is-fullscreen-mode ) .page-template-modal-screen-overlay {
	@media screen and ( min-width: 783px ) {
		left: 36px;
	}

	@media screen and ( min-width: 961px ) {
		left: 160px;
	}
}

// Allow space for admin bar if present and not in full screen mode
body.admin-bar:not( .is-fullscreen-mode ) .page-template-modal-screen-overlay {
	top: 46px;

	@media screen and ( min-width: 783px ) {
		top: 32px;
	}
}

// Full screen modal
.page-template-modal {
	width: 100%;
	height: 100vh;
	max-width: 800px;
	animation: none;

	@media screen and ( min-width: 1200px ) {
		width: 80%;
		max-width: 1200px;
	}
}

.page-template-modal .components-modal__header-heading-container {
	justify-content: center;
}

.page-template-modal .components-modal__content {
	overflow-y: scroll;
	-webkit-overflow-scrolling: touch;
}

.page-template-modal__inner {
	max-width: 720px;
	margin: 0 auto;
	padding: 0;

	@media screen and ( max-width: 659px ) {
		padding-bottom: 3em;
	}

	@media screen and ( min-width: 1200px ) {
		max-width: 100%;
	}
}

.page-template-modal__list {
	.components-base-control__label {
		@include screen-reader-text();
	}

	.template-selector-control__options {
		display: grid;
		// stylelint-disable-next-line unit-whitelist
		grid-template-columns: 1fr 1fr; // force 2 col on small screens to ensure blank isn't the only option visible on load
		grid-gap: 1.75em;

		@media screen and ( min-width: 660px ) {
			margin-top: 0;
			// stylelint-disable unit-whitelist
			grid-template-columns: repeat(
				auto-fit,
				minmax( 110px, 1fr )
			); // allow grid to take over number of cols on large screens
			// stylelint-enable unit-whitelist
		}

		@media screen and ( min-width: 1200px ) {
			// stylelint-disable unit-whitelist
			grid-template-columns: repeat(
				auto-fit,
				minmax( 150px, 1fr )
			); // allow grid to take over number of cols on large screens
			// stylelint-enable unit-whitelist
		}
	}

	.template-selector-control__option {
		margin-bottom: 4px;
	}

	.template-selector-control__label {
		display: block;
		width: 100%;
		font-size: 14px;
		text-align: center;
		border: 1px solid $template-selector-border-color;
		border-radius: 6px;
		cursor: pointer;
		background: none;
		appearance: none;
		padding: 0 0 14px;
		overflow: hidden;

		&:hover,
		&:focus {
			border-color: #2562b7;
			box-shadow: 0 0 0 1px #2562b7;
			outline: 1px solid transparent;
			outline-offset: -1px;
		}
	}

	.template-selector-control__preview-wrap {
		width: 100%;
		display: block;
		margin: 0 auto 14px;
		border-bottom: 1px solid #a1aab2;
		background: $template-selector-empty-background;
		border-radius: 0;
		overflow: hidden;
		padding-bottom: 110%;
		box-sizing: content-box;
		position: relative;
		pointer-events: none;
		opacity: 1;

		&.is-rendering {
			opacity: 0.5;
		}
	}

	.template-selector-control__media {
		width: 100%;
		display: block;
		position: absolute;
		top: 0;
		left: 0;
	}
}

.page-template-modal__actions {
	display: flex;
	flex-direction: column;
	align-items: center;

	@media screen and ( min-width: 960px ) {
		flex-direction: row;
		justify-content: flex-end;
	}
}

.page-template-modal__action {
	@media screen and ( max-width: 960px ) {
		margin-bottom: 1em;
	}
}

.page-template-modal__action-use {
	@media screen and ( min-width: 960px ) {
		margin-right: 1em;
	}
}

.page-template-modal__form {
	@media screen and ( min-width: 660px ) {
		max-width: 50%;
	}
}

// Template Selector Preview
.template-selector-preview {
	@media screen and ( max-width: 659px ) {
		display: none;
	}

	position: fixed;
	top: 80px;
	bottom: 25px;
	right: 32px;
	width: calc( 50% - 50px );
	background: $template-selector-empty-background;
	border: 1px solid $template-selector-border-color;
	border-radius: 6px;
	pointer-events: none;
	overflow-x: hidden;
	overflow-y: auto;
}

// Preview adjustments.
.editor-styles-wrapper .block-editor-block-preview__container {
	.block-editor-block-list__block[data-type='core/cover'] {
		width: 100%;
	}
}
