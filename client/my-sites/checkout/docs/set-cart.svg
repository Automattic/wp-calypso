<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="958px" preserveAspectRatio="none" style="width:1666px;height:958px;" version="1.1" viewBox="0 0 1666 958" width="1666px" zoomAndPan="magnify"><defs><filter height="300%" id="f1w5e0m54rw4nj" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#F7DCC6" height="943.627" style="stroke: #A80036; stroke-width: 1.0;" width="141" x="40" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="0" x="112.5" y="16.5684"/><rect fill="#F5E6B3" height="943.627" style="stroke: #A80036; stroke-width: 1.0;" width="141" x="254" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="298" y="16.5684">Calypso</text><rect fill="#B8E6BF" height="943.627" style="stroke: #A80036; stroke-width: 1.0;" width="1248.5" x="407" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="138" x="962.25" y="16.5684">Composite Checkout</text><rect fill="#FFFFFF" filter="url(#f1w5e0m54rw4nj)" height="114.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="105.5" y="566.7227"/><rect fill="#FFFFFF" filter="url(#f1w5e0m54rw4nj)" height="173.1738" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="319.5" y="522.1016"/><rect fill="#FFFFFF" filter="url(#f1w5e0m54rw4nj)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="935" y="246.6621"/><rect fill="#FFFFFF" filter="url(#f1w5e0m54rw4nj)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1150" y="164.041"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="110" x2="110" y1="58.7988" y2="459.8359"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="110" x2="110" y1="459.8359" y2="500.791"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="110" x2="110" y1="500.791" y2="909.1387"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="324" x2="324" y1="58.7988" y2="459.8359"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="324" x2="324" y1="459.8359" y2="500.791"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="324" x2="324" y1="500.791" y2="909.1387"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="484" x2="484" y1="58.7988" y2="459.8359"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="484" x2="484" y1="459.8359" y2="500.791"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="484" x2="484" y1="500.791" y2="909.1387"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="682" x2="682" y1="58.7988" y2="459.8359"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="682" x2="682" y1="459.8359" y2="500.791"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="682" x2="682" y1="500.791" y2="909.1387"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="939.5" x2="939.5" y1="58.7988" y2="459.8359"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="939.5" x2="939.5" y1="459.8359" y2="500.791"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="939.5" x2="939.5" y1="500.791" y2="909.1387"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1154.5" x2="1154.5" y1="58.7988" y2="459.8359"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1154.5" x2="1154.5" y1="459.8359" y2="500.791"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1154.5" x2="1154.5" y1="500.791" y2="909.1387"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1358.5" x2="1358.5" y1="58.7988" y2="459.8359"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1358.5" x2="1358.5" y1="459.8359" y2="500.791"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1358.5" x2="1358.5" y1="500.791" y2="909.1387"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1554.5" x2="1554.5" y1="58.7988" y2="459.8359"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1554.5" x2="1554.5" y1="459.8359" y2="500.791"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1554.5" x2="1554.5" y1="500.791" y2="909.1387"/><rect fill="#FEFECE" filter="url(#f1w5e0m54rw4nj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="49" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="56" y="43.8457">WordPress.com</text><rect fill="#FEFECE" filter="url(#f1w5e0m54rw4nj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="49" y="908.1387"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="56" y="928.6738">WordPress.com</text><rect fill="#FEFECE" filter="url(#f1w5e0m54rw4nj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="263" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="270" y="43.8457">Undocumented</text><rect fill="#FEFECE" filter="url(#f1w5e0m54rw4nj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="263" y="908.1387"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="270" y="928.6738">Undocumented</text><rect fill="#FEFECE" filter="url(#f1w5e0m54rw4nj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="133" x="416" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="423" y="43.8457">useShoppingCart</text><rect fill="#FEFECE" filter="url(#f1w5e0m54rw4nj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="133" x="416" y="908.1387"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="423" y="928.6738">useShoppingCart</text><rect fill="#FEFECE" filter="url(#f1w5e0m54rw4nj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="214" x="573" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="200" x="580" y="43.8457">useCartUpdateAndRevalidate</text><rect fill="#FEFECE" filter="url(#f1w5e0m54rw4nj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="214" x="573" y="908.1387"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="200" x="580" y="928.6738">useCartUpdateAndRevalidate</text><rect fill="#FEFECE" filter="url(#f1w5e0m54rw4nj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="189" x="843.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="175" x="850.5" y="43.8457">useShoppingCartReducer</text><rect fill="#FEFECE" filter="url(#f1w5e0m54rw4nj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="189" x="843.5" y="908.1387"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="175" x="850.5" y="928.6738">useShoppingCartReducer</text><rect fill="#FEFECE" filter="url(#f1w5e0m54rw4nj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="193" x="1056.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="179" x="1063.5" y="43.8457">useShoppingCartManager</text><rect fill="#FEFECE" filter="url(#f1w5e0m54rw4nj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="193" x="1056.5" y="908.1387"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="179" x="1063.5" y="928.6738">useShoppingCartManager</text><rect fill="#FEFECE" filter="url(#f1w5e0m54rw4nj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="1273.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="1280.5" y="43.8457">ShoppingCartProvider</text><rect fill="#FEFECE" filter="url(#f1w5e0m54rw4nj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="1273.5" y="908.1387"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="1280.5" y="928.6738">ShoppingCartProvider</text><rect fill="#FEFECE" filter="url(#f1w5e0m54rw4nj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="179" x="1463.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="165" x="1470.5" y="43.8457">CheckoutSystemDecider</text><rect fill="#FEFECE" filter="url(#f1w5e0m54rw4nj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="179" x="1463.5" y="908.1387"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="165" x="1470.5" y="928.6738">CheckoutSystemDecider</text><rect fill="#FFFFFF" filter="url(#f1w5e0m54rw4nj)" height="114.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="105.5" y="566.7227"/><rect fill="#FFFFFF" filter="url(#f1w5e0m54rw4nj)" height="173.1738" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="319.5" y="522.1016"/><rect fill="#FFFFFF" filter="url(#f1w5e0m54rw4nj)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="935" y="246.6621"/><rect fill="#FFFFFF" filter="url(#f1w5e0m54rw4nj)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1150" y="164.041"/><polygon fill="#A80036" points="1543,101.4199,1553,105.4199,1543,109.4199,1547,105.4199" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="324.5" x2="1549" y1="105.4199" y2="105.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="331.5" y="85.3672">import</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="331.5" y="100.6777">setCart</text><polygon fill="#A80036" points="1369.5,130.7305,1359.5,134.7305,1369.5,138.7305,1365.5,134.7305" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1363.5" x2="1554" y1="134.7305" y2="134.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="1375.5" y="129.9883">cartKey, setCart</text><polygon fill="#A80036" points="1171,160.041,1161,164.041,1171,168.041,1167,164.041" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1165" x2="1357.5" y1="164.041" y2="164.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="1177" y="159.2988">cartKey, setCart</text><polygon fill="#A80036" points="1346.5,174.041,1356.5,178.041,1346.5,182.041,1350.5,178.041" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1155" x2="1352.5" y1="178.041" y2="178.041"/><path d="M1270,191.041 L1270,231.041 L1442,231.041 L1442,201.041 L1432,191.041 L1270,191.041 " fill="#FBFB77" filter="url(#f1w5e0m54rw4nj)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1432,191.041 L1432,201.041 L1442,201.041 L1432,191.041 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="1276" y="208.6094">manager</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="1276" y="223.9199">stored as provider value</text><polygon fill="#A80036" points="956,242.6621,946,246.6621,956,250.6621,952,246.6621" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="950" x2="1154" y1="246.6621" y2="246.6621"/><polygon fill="#A80036" points="1143,271.9727,1153,275.9727,1143,279.9727,1147,275.9727" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="940" x2="1149" y1="275.9727" y2="275.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="947" y="271.2305">cacheStatus, dispatcher</text><polygon fill="#A80036" points="693,301.2832,683,305.2832,693,309.2832,689,305.2832" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="687" x2="1154" y1="305.2832" y2="305.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="699" y="300.541">cacheStatus, dispatcher</text><polygon fill="#FBFB77" filter="url(#f1w5e0m54rw4nj)" points="604,318.2832,759,318.2832,769,329.2832,759,341.2832,604,341.2832,594,329.2832,604,318.2832" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="606" y="334.8516">cacheStatus =&gt; 'invalid'</text><polygon fill="#A80036" points="928,379.2148,938,383.2148,928,387.2148,932,383.2148" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="682" x2="934" y1="383.2148" y2="383.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="689" y="363.1621">dispatch</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="689" y="378.4727">REQUEST_UPDATED_RESPONSE_CART</text><path d="M857,396.2148 L857,421.2148 L1018,421.2148 L1018,406.2148 L1008,396.2148 L857,396.2148 " fill="#FBFB77" filter="url(#f1w5e0m54rw4nj)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1008,396.2148 L1008,406.2148 L1018,406.2148 L1008,396.2148 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="863" y="413.7832">cacheStatus: 'pending'</text><polygon fill="#A80036" points="1143,447.8359,1153,451.8359,1143,455.8359,1147,451.8359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="940" x2="1149" y1="451.8359" y2="451.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="947" y="447.0938">cacheStatus</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="129" x="768.25" y="484.4707">set cart asynchronously</text><polygon fill="#A80036" points="340.5,518.1016,330.5,522.1016,340.5,526.1016,336.5,522.1016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="334.5" x2="681" y1="522.1016" y2="522.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="346.5" y="517.3594">&lt;&lt; setCart &gt;&gt;</text><polygon fill="#A80036" points="126.5,562.7227,116.5,566.7227,126.5,570.7227,122.5,566.7227" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="120.5" x2="318.5" y1="566.7227" y2="566.7227"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="132.5" y="546.6699">POST</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="132.5" y="561.9805">/me/shopping-cart/{cartKey}</text><path d="M8,579.7227 L8,665.7227 L210,665.7227 L210,589.7227 L200,579.7227 L8,579.7227 " fill="#FBFB77" filter="url(#f1w5e0m54rw4nj)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M200,579.7227 L200,589.7227 L210,589.7227 L200,579.7227 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="14" y="597.291">May be passed:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="18" y="612.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="14" y="627.9121">{ extra: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="46" y="643.2227">purchaseType: 'renewal'</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="14" y="658.5332">} }</text><polygon fill="#A80036" points="307.5,677.2754,317.5,681.2754,307.5,685.2754,311.5,681.2754" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="110.5" x2="313.5" y1="681.2754" y2="681.2754"/><polygon fill="#A80036" points="670,691.2754,680,695.2754,670,699.2754,674,695.2754" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="324.5" x2="676" y1="695.2754" y2="695.2754"/><polygon fill="#A80036" points="928,735.8965,938,739.8965,928,743.8965,932,739.8965" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="682" x2="934" y1="739.8965" y2="739.8965"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="689" y="719.8438">dispatch</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="228" x="689" y="735.1543">RECEIVE_UPDATED_RESPONSE_CART</text><path d="M868,752.8965 L868,777.8965 L1008,777.8965 L1008,762.8965 L998,752.8965 L868,752.8965 " fill="#FBFB77" filter="url(#f1w5e0m54rw4nj)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M998,752.8965 L998,762.8965 L1008,762.8965 L998,752.8965 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="874" y="770.4648">cacheStatus: 'valid'</text><polygon fill="#A80036" points="1143,819.8281,1153,823.8281,1143,827.8281,1147,823.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="940" x2="1149" y1="823.8281" y2="823.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="947" y="803.7754">cacheStatus</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="947" y="819.0859">responseCart</text><polygon fill="#A80036" points="1346.5,833.8281,1356.5,837.8281,1346.5,841.8281,1350.5,837.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1155" x2="1352.5" y1="837.8281" y2="837.8281"/><path d="M1262,850.8281 L1262,875.8281 L1451,875.8281 L1451,860.8281 L1441,850.8281 L1262,850.8281 " fill="#FBFB77" filter="url(#f1w5e0m54rw4nj)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1441,850.8281 L1441,860.8281 L1451,860.8281 L1441,850.8281 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="1268" y="868.3965">stored manager is updated</text><polygon fill="#A80036" points="495.5,887.1387,485.5,891.1387,495.5,895.1387,491.5,891.1387" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="489.5" x2="1357.5" y1="891.1387" y2="891.1387"/><!--
@startuml


skinparam ParticipantPadding 5
skinparam BoxPadding 5
box " " #f7dcc6
  participant WordPress.com
end box
box "Calypso" #f5e6b3
  participant Undocumented
end box
box "Composite Checkout" #b8e6bf
  participant useShoppingCart
  participant useCartUpdateAndRevalidate
  participant useShoppingCartReducer
  participant useShoppingCartManager
  participant ShoppingCartProvider
  participant CheckoutSystemDecider
end box

Undocumented -> CheckoutSystemDecider : import\nsetCart
CheckoutSystemDecider -> ShoppingCartProvider : cartKey, setCart
ShoppingCartProvider -> useShoppingCartManager : cartKey, setCart
activate useShoppingCartManager
return
note over ShoppingCartProvider : manager\nstored as provider value
useShoppingCartManager -> useShoppingCartReducer
activate useShoppingCartReducer
return cacheStatus, dispatcher
useShoppingCartManager -> useCartUpdateAndRevalidate : cacheStatus, dispatcher
hnote over useCartUpdateAndRevalidate
	cacheStatus => 'invalid'
end hnote
useCartUpdateAndRevalidate -> useShoppingCartReducer : dispatch\nREQUEST_UPDATED_RESPONSE_CART
note over useShoppingCartReducer
	cacheStatus: 'pending'
end note
useShoppingCartReducer -> useShoppingCartManager : cacheStatus
...set cart asynchronously...
useCartUpdateAndRevalidate -> Undocumented : << setCart >>
activate Undocumented
Undocumented -> WordPress.com : POST\n/me/shopping-cart/{cartKey}
activate WordPress.com
note over WordPress.com
	May be passed:

	{ extra: {
		purchaseType: 'renewal'
	} }
end note
return
return
useCartUpdateAndRevalidate -> useShoppingCartReducer : dispatch\nRECEIVE_UPDATED_RESPONSE_CART
note over useShoppingCartReducer
	cacheStatus: 'valid'
end note
useShoppingCartReducer -> useShoppingCartManager : cacheStatus\nresponseCart
useShoppingCartManager -> ShoppingCartProvider
note over ShoppingCartProvider
	stored manager is updated
end note
ShoppingCartProvider -> useShoppingCart

@enduml

PlantUML version 1.2019.06(Fri May 24 12:10:25 CDT 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 14+36-1461
Operating System: Mac OS X
OS Version: 10.15.7
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>