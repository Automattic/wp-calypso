@import "@wordpress/base-styles/colors";
@import "@automattic/typography/styles/woo-commerce";

.woo {
	$woo-purple-40: #966ccf;
	$woo-purple-50: #7f54b3;
	$woo-purple-60: #674399;
	$woo-purple-70: #533582;
	$woo-label-color: #50575e;
	$woo-gray-100: #101517;
	$woo-gray-40: #787c82;
	$woo-font-size-small: $font-body-extra-small;
	$woo-font-size-base: $font-body-small;
	$woo-font-size-input: $font-body-small;
	$woo-radius-input: 4px;
	$woo-form-whitespace: 60px;
	$woo-form-whitespace-660: 20px;
	$woo-form-divider-border: 1px solid #e6e6e6;
	$gray-60: #50575e;
	$gray-50: #646970;
	$woo-inter-font:  "Inter", -apple-system, system-ui, sans-serif;

	background: #fff;
	min-height: 100%;

	* {
		font-family: $woo-inter-font;
	}

	&.layout.is-section-login {
		min-height: 100%;
		padding-bottom: 0;
	}

	input[type="text"].form-text-input,
	input[type="email"].form-text-input,
	input[type="password"].form-text-input,
	input[type="tel"].form-text-input,
	textarea.form-text-input {
		background-color: #fff;
		border: 1px solid #c3c4c7;
		border-radius: $woo-radius-input;
		box-sizing: border-box;
		color: $woo-gray-100;
		padding: 12px 16px;
		transition: all ease-in-out 0.2s;
		width: 100%;
		font-weight: 400;
		font-size: $woo-font-size-input;
		line-height: 18px;
		margin-bottom: 16px;

		&:focus,
		&:hover,
		&:focus:hover {
			border-color: $woo-purple-50;
			outline: none;
			box-shadow: 0 0 0 2px #e5cfe8;
		}
	}

	p {
		margin-bottom: 0;
		letter-spacing: 0;
	}

	a,
	.wp-login__links a,
	.wp-login__links button,
	.button:not(.social-buttons__button),
	.magic-login__footer a {
		font-size: $woo-font-size-base;
		line-height: 28px;
		text-align: center;
		color: $gray-50;
		text-decoration: underline;
		letter-spacing: 0;

		&:hover,
		&:visited {
			color: $gray-50;
		}
	}

	.button:not(.social-buttons__button) {
		border-radius: 8px; /* stylelint-disable-line scales/radii */
		border: 2px solid $woo-purple-60;
		text-decoration: none;
		width: auto;
		padding: 10px 24px;
		line-height: 20px;
	}

	.button.is-primary,
	.login .button.is-primary,
	.magic-login.is-white-login .magic-login__form-action .button.is-primary:not([disabled]) {
		background-color: $woo-purple-50;
		border: none;
		color: #fff;
		width: 100%;
		font-family: $woo-inter-font;
		font-size: 1rem;
		font-style: normal;
		font-weight: 500;
		line-height: 28px;

		&.is-busy {
			background-image: none;
		}

		&:hover {
			background-color: $woo-purple-70;
			color: #fff;
		}

		&:disabled {
			background-color: var(--studio-gray-0);
			color: var(--studio-gray-20);
		}
	}

	button {
		background-color: initial;
	}

	.login__form-user-exists-notice.notice {
		border-radius: 8px; // stylelint-disable-line scales/radii
		overflow: auto;
		padding: 16px 20px;
		background-color: #f6f7f7;

		.notice__icon-wrapper {
			background-color: #f6f7f7;
			color: #2c3338;
			width: auto;
			padding: 0;
			align-items: flex-start;
		}

		.notice__dismiss {
			padding: 0;
			background-color: #f6f7f7;
			color: #a7aaad;
		}

		.notice__content {
			padding: 0 16px;
			background-color: #f6f7f7;
			color: #2c3338;
		}

		.notice__text {
			color: #2c3338;
			font-size: rem(14px);
			font-style: normal;
			font-weight: 400;
			line-height: 20px; /* 142.857% */
			letter-spacing: -0.24px;


			a,
			a:visited, {
				color: $woo-purple-60;
				font-size: rem(14px);
				font-style: normal;
				font-weight: 500;
				line-height: 20px;
				letter-spacing: -0.24px;
				text-decoration: none;
			}

			a:hover {
				color: $woo-purple-40;
			}
		}
	}

	.masterbar__progress-bar {
		background-color: transparent;
		height: 8px;
		top: 0;
		position: absolute;

		.progress-bar__progress {
			border-radius: 0;
			background-color: var(--wp-admin-theme-color);
		}
	}

	// masterbar styles
	.masterbar__woo {
		background: transparent;
		border-bottom: none;
		position: absolute;
		height: 72px;
		display: flex;
		flex-direction: row;
		align-items: center;
		padding: 28px 24px;

		.masterbar__woo-nav {
			display: flex;
			flex-direction: row;
			align-items: center;
			margin: 0;
			list-style-type: none;
			width: 100%;

			.masterbar__login-back-link {
				margin-top: -10px;
				font-weight: 500;

				@media screen and ( max-width: 660px ) {
					display: none;
				}
			}
		}
	}

	.masterbar__woo-nav-wrapper {
		width: 100%;
	}

	.masterbar__woo-nav-item a.masterbar__login-back-link {
		color: var(--studio-gray-100);
		text-decoration: none;
		display: flex;
		font-weight: 500;
	}

	.masterbar__woo-mobile-nav {
		display: none;
		flex-direction: row;
		align-items: center;
		margin: 0;
		list-style-type: none;
		width: 100%;
		position: fixed;
		bottom: 0;
		padding: 24px 0;
		box-shadow: inset 0 1px 0 #e2e4e7;
		background-color: #fff;
		z-index: 999;

		@media screen and ( max-width: 660px ) {
			display: flex;
		}

		.masterbar__login-back-link {
			@media screen and ( max-width: 660px ) {
				display: block;
			}
		}
	}

	&.is-section-signup .layout__content,
	.layout__content {
		padding-top: 72px;

		@media screen and ( max-width: 660px ) {
			padding-top: 50px;
			padding-bottom: 80px;
		}
	}

	.layout__primary .main {
		padding-bottom: 0;
	}

	// login styles
	.login__form,
	.magic-login {
		.button {
			float: none;
			margin: 0;
		}
	}

	.login__form {
		display: flex;
		flex-direction: column;
		padding: 54px 24px 32px;

		@media screen and ( max-width: 660px ) {
			padding: 32px 16px 28px;
		}
	}

	.login__form-header {
		margin-top: 0;
		margin-bottom: 12px;

		@media screen and ( max-width: 660px ) {
			margin-bottom: 16px;
		}
	}

	.form-password-input .form-password-input__toggle-visibility {
		top: 10px;
	}

	.form-input-validation {
		text-align: left;
	}


	.jetpack-connect__logged-in-form .formatted-header,
	.jetpack-connect__authorize-form .formatted-header,
	.login__form-header-wrapper,
	.signup-form__woo-wrapper {
		text-align: center;
		margin: 0 auto;
		line-height: 28px;

		h1,
		h3 {
			color: var(--studio-gray-100);
			font-feature-settings: "ss01" on, "salt" on;
			font-family: proxima-nova, sans-serif;
			text-align: center;
			font-size: 2.25rem;
			font-weight: 700;
			line-height: 39.6px;
			letter-spacing: -0.72px;

			@media screen and ( max-width: 660px ) {
				text-align: left;
			}
		}
	}

	.login__header-subtitle,
	.formatted-header__subtitle {
		color: $gray-60;
		font-size: $font-body-large;
		padding-bottom: 0;
		margin: 0;
		font-weight: 400;
		line-height: 27px;
		letter-spacing: -0.025px;
		-webkit-font-smoothing: subpixel-antialiased;

		a {
			color: $woo-purple-70;
			font-weight: 400;
			font-size: 1rem;
			text-decoration: none;

			&:hover {
				color: $woo-purple-40;
			}
		}

		@media screen and ( max-width: 660px ) {
			text-align: left;
		}
	}

	.magic-login__form-action {
		text-align: center;
		margin-top: 25px;
	}

	.auth-form__social-buttons {
		align-items: center;

		@media screen and ( max-width: 660px ) {
			align-items: flex-start;
		}

		button.social-buttons__button.button {
			border: 0;
			text-align: left;
			padding-bottom: 0;
			padding-left: 0;
			padding-right: 0;

			svg {
				border: 1px solid var(--studio-gray-10);
				border-radius: 24px; /* stylelint-disable-line scales/radii */
				padding: 12px;
				margin: 0;
			}
		}

		.social-buttons__service-name {
			margin-left: 16px;
			font-weight: 500;
		}

		.login__social-tos {
			margin: 0 auto 2.5em;
			max-width: 100%;
			order: -1;

			a {
				font-size: inherit;
				line-height: inherit;
			}
		}
	}

	.step-wrapper,
	.wp-login__main.main,
	.magic-login.main {
		max-width: 96%;

		@media screen and ( min-width: 617px ) {
			max-width: 617px;
		}
	}

	.card {
		box-shadow: none;
		padding-left: 0;
		padding-right: 0;
		background-color: initial;
	}

	.magic-login {
		margin-top: 50px;
	}

	.wp-login__container,
	.magic-login,
	.step-wrapper,
	.jetpack-connect__main-logo {
		box-sizing: border-box;
		padding: 48px 0 0;
		width: 100%;

		@media screen and ( max-width: 660px ) {
			padding-top: 30px;
		}
	}

	.login__social-connect-prompt-logo {
		height: 58px;
		width: 58px;

		&:first-child {
			width: 48px;
			height: 48px;
			margin-right: 3px;
		}

		// move apple icon slightly to the top so it looks more centered
		&.is-apple {
			position: relative;
			top: -3px;
		}
	}

	.login form,
	.wp-login__links,
	.login__social-connect-prompt,
	.magic-login__request-link,
	.signup-form,
	.login__two-factor-footer {
		padding-left: $woo-form-whitespace;
		padding-right: $woo-form-whitespace;
		@media screen and ( max-width: 660px ) {
			padding-left: $woo-form-whitespace-660;
			padding-right: $woo-form-whitespace-660;
		}
	}

	.login__form-header-wrapper {
		@media screen and ( max-width: 660px ) {
			padding-left: $woo-form-whitespace-660;
			padding-right: $woo-form-whitespace-660;
		}
	}

	.magic-login__form-header {
		margin-bottom: 0;
	}

	.magic-login__form {
		border: none;
		.logged-out-form {
			max-width: 100%;
			box-shadow: none;
			padding-left: 0;
			padding-right: 0;
			padding-bottom: 32px;

			p {
				text-align: center;
				max-width: 415px;
				margin: 0 auto 24px;
			}
		}
	}

	.magic-login__request-link .magic-login__form > p {
		text-align: center;
	}

	.auth-form__social {
		max-width: 100%;
		padding: 40px 0 14px;
		border-top: 0;
		display: flex;
		flex-direction: column;
		align-items: center;

		@media screen and ( max-width: 660px ) {
			align-items: flex-start;
		}

		p {
			color: var(--studio-gray-60);
			font-size: $woo-font-size-small;
		}

		a {
			font-size: $woo-font-size-small;
		}

		button {
			padding: 0;
		}

		.auth-form__social-buttons-tos {
			margin-top: 24px;
			font-size: $woo-font-size-small;
			line-height: 18px;
			color: $gray-50;
			text-align: left;

			a {
				color: $gray-50;
				line-height: 18px;
				font-size: inherit;
			}
		}
	}

	.login__body--continue-as-user {
		width: 100%;
		margin: 48px auto 0;
		max-width: 327px;
		display: flex;
		flex-direction: column;

		.auth-form__social {
			max-width: 100%;
			padding: 40px 0 14px;
			border-top: 0;
			display: flex;
			flex-direction: column;
			align-items: center;

			.auth-form__social-buttons {
				width: 100%;

				.auth-form__social-buttons-container {
					gap: 16px;
				}

				button.social-buttons__button.button {
					display: flex;
					height: 48px;
					padding: 8px 16px;
					align-items: center;
					gap: 60px;
					align-self: stretch;
					border-radius: 8px; // stylelint-disable-line scales/radii
					border: 2px solid var(--studio-gray-10);
					width: 100%;
					margin: 0;
				}

				.social-buttons__service-name {
					font-size: 1rem;
					font-style: normal;
					font-weight: 500;
					line-height: 24px;
					color: var(--studio-gray-100);
					margin: 0;
				}

				.social-icons {
					border: 0;
					padding: 0;
				}

				.login__social-tos {
					margin: 0 auto 2.5em;
					max-width: 100%;
					order: -1;

					a {
						font-size: inherit;
						line-height: inherit;
					}
				}
			}
		}

		.auth-form__social-buttons-tos {
			display: none;
		}
	}

	.continue-as-user {
		margin: 0;
		height: unset;
		min-height: 238px;

		.continue-as-user__user-info {
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;
			gap: 8px;
			align-self: stretch;
			border-radius: 8px; // stylelint-disable-line scales/radii
			border: 2px solid #dcdcde;
			height: 221px;
			box-sizing: border-box;
		}

		~ .auth-form__separator {
			margin: 32px auto;
		}

		~ .card.auth-form__social.is-login {
			margin: 0;
			padding: 0;
		}

		.continue-as-user__gravatar-link {
			pointer-events: auto;
			display: flex;
			flex-direction: column;
			align-items: center;
			background: #fff;
			text-decoration: none;
			margin: 0 0 8px;

			.gravatar.continue-as-user__gravatar {
				width: 80px;
				height: 80px;
				box-sizing: border-box;
			}

			.continue-as-user__username {
				font-size: 1rem;
				font-style: normal;
				font-weight: 600;
				line-height: 24px;
				margin-top: 8px;

				&:hover {
					color: var(--color-gray-100);
				}
			}

			.continue-as-user__email {
				font-size: 0.875rem;
				line-height: 21px;
				font-weight: 400;
				color: $gray-50;
				text-overflow: ellipsis;
				width: 100%;
				overflow: hidden;
				white-space: nowrap;
				text-align: center;
				margin: 0;
			}

		}

		.continue-as-user__not-you {
			margin-bottom: 0;
			position: initial;
		}

		.continue-as-user__change-user-link {
			text-decoration: none;
			color: $woo-purple-50;
			font-size: 0.875rem;
			font-style: normal;
			font-weight: 500;
			line-height: 21px;

			&:hover {
				color: $woo-purple-70;
			}
		}

		.continue-as-user__continue-button {
			margin-top: 24px;
		}
	}

	.logged-out-form {
		max-width: 100%;
		background: inherit;
		padding: 0 0 8px;
	}

	.logged-out-form label.form-label,
	.login__form-userdata label.form-label {
		font-weight: normal;
		font-size: $woo-font-size-base;
		line-height: 20px;
		color: $woo-label-color;
		margin-bottom: 8px;
	}

	.login__form-signup-link {
		display: none;
	}

	.auth-form__separator::before,
	.auth-form__separator::after {
		border-block-start: $woo-form-divider-border;
	}

	.auth-form__separator + .auth-form__social.card {
		clip-path: unset; // unset the rule applied in ./client/blocks/authentication/form-divider/style.scss
		max-width: 100%;
	}

	.auth-form__social,
	.two-factor-authentication__actions {
		background: initial;
		padding-top: 40px;
		padding-bottom: 40px;
		text-align: center;

		@media screen and ( max-width: 660px ) {
			padding-top: 28px;
		}
	}

	.login__two-factor-footer,
	.login__lost-password-footer {
		display: flex;
		flex-direction: column;
		align-items: center;
		font-weight: 400;

		p {
			color: $gray-60;
			line-height: 24px;
			margin-bottom: 8px;
			font-size: $font-body;
		}

		a {
			color: $woo-purple-70;
			font-size: $font-body;
			text-decoration: none;
		}

		@media screen and ( max-width: 660px ) {
			align-items: flex-start;
		}
	}

	.login__form-terms {
		display: none;
	}

	.signup-form {
		padding-top: 32px;

		.auth-form__separator {
			width: 100%;
			margin-left: 0;
			margin-right: 0;

			@media ( min-width: 782px ) {
				width: 100%;
			}

			&::before,
			&::after {
				position: absolute;
				border-inline-start: 0;
				border-block-start: $woo-form-divider-border;
				inset-block-start: 50%;
				inset-inline-start: 0;
				width: 42%;
			}

			&::after {
				left: 58%;
			}
		}
	}

	.auth-form__separator .auth-form__separator-text {
		padding: 0 27px !important;
		background: #fff;
	}

	.wp-login__footer--oauth {
		display: none;
	}

	.app-promo.magic-link-app-promo {
		padding: 24px;
	}

	.login .login__form-forgot-password {
		text-align: start;
		color: $gray-50;
		margin-bottom: 32px;
		font-weight: 400;
		margin-top: -14px;
	}

	.logged-out-form__footer {
		background: none;
		border: none;
		text-align: center;
		margin: 0;

		&.is-blended {
			padding-top: 16px;
		}
	}

	.logged-out-form__links {
		text-align: center;
	}

	.login__lostpassword-form {
		margin-top: 50px;

		.login__form-action {
			margin: 16px 0 52px;
		}
	}

	// Signup styles
	.step-wrapper {
		margin: 0 auto 50px;

		.formatted-header {
			margin: 0;
		}
	}

	.formatted-header__title {
		font-size: $font-title-medium;
		margin: 0 0 8px;
		padding: 0;

		@media screen and ( max-width: 660px ) {
			padding-left: $woo-form-whitespace-660;
			padding-right: $woo-form-whitespace-660;
		}
	}

	.formatted-header__subtitle {
		@media screen and ( max-width: 660px ) {
			width: 250px;
		}

		@media screen and ( max-width: 660px ) {
			padding-left: $woo-form-whitespace-660;
			padding-right: $woo-form-whitespace-660;
		}
	}

	&.is-section-signup::before,
	&.is-section-signup .layout__primary::before {
		display: none;
	}

	.signup-form__terms-of-service-link {
		color: $gray-50;
		text-align: left;
		margin-bottom: 32px;

		a {
			color: inherit;
			font-size: inherit;
		}
	}

	.signup-form__woo-wrapper .gridicon {
		color: var(--color-primary);
	}

	&.is-woocommerce-core-profiler-flow {
		background: #fff;

		* {
			font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
		}

		input[type="text"].form-text-input,
		input[type="email"].form-text-input,
		input[type="password"].form-text-input,
		input[type="tel"].form-text-input,
		textarea.form-text-input {
			&:focus,
			&:hover,
			&:focus:hover {
				border-color: var(--wp-admin-theme-color);
				outline: none;
				box-shadow: none;
			}
		}

		.masterbar {
			display: flex;
		}

		.masterbar__woo-nav-item:first-child {
			margin-right: auto;
		}

		.masterbar__no-thanks-button {
			color: var(--wp-admin-theme-color);
			font-size: $woo-font-body-extra-small;
			text-decoration: none;
		}

		.masterbar__woo-link {
			display: flex;
		}

		.wp-login__container,
		.magic-login,
		.step-wrapper {
			@media screen and ( max-width: 660px ) {
				padding-top: 40px;
			}
		}

		.login form,
		.signup-form {
			max-width: 405px;
			margin: 0 auto;

			input.form-text-input {
				border-color: #bbb;

				&.is-valid {
					border-color: #bbb;
				}
			}
		}

		.login__form-userdata label.form-label {
			line-height: 16px;
		}

		.login__form .login__form-userdata input.form-text-input,
		.login__form .login__form-userdata input {
			margin-bottom: 16px;
		}

		.login__form-header h3,
		.formatted-header .formatted-header__title {
			margin-bottom: 12px;
			font-size: $woo-font-title-large;
			line-height: 32px;
			font-weight: 500;

			@media screen and ( max-width: 660px ) {
				font-size: rem(28px);
			}
		}

		.login__form-header-wrapper h3 {
			font-weight: 500;
		}

		form.two-factor-authentication__verification-code-form-wrapper {
			@media screen and ( max-width: 660px ) {
				margin: 0;
				max-width: 660px;
			}
		}

		.login__header-subtitle,
		.formatted-header__subtitle {
			color: $gray-700;

			@media screen and ( max-width: 660px ) {
				width: auto;
			}
		}

		.login__form-userdata label.form-label,
		.logged-out-form label.form-label {
			font-weight: 500;
			text-transform: uppercase;
			font-size: rem(11px);
			color: $gray-900;
		}

		.jetpack-connect__action-disclaimer .button.is-primary,
		.form-button.is-primary {
			border-radius: 2px;
			height: 48px;
			padding: 10px 16px;
			font-weight: 500;
			background-color: var(--wp-admin-theme-color);
		}

		.two-factor-authentication__actions.card button.button {
			border-radius: 2px;
			height: 48px;
			padding: 10px 16px;
			font-weight: 500;
			background-color: transparent;
			color: var(--wp-admin-theme-color);
			border: 1px solid var(--wp-admin-theme-color);
			width: 100%;
		}

		.two-factor-authentication__verification-code-form.card {
			padding-top: 0;
			margin-bottom: 36px;

			.verification-code-form__help-text {
				color: $gray-700;
			}

			.security-key-form__help-text {
				color: $gray-700;
				margin-bottom: 24px;

				p strong {
					color: $gray-700;
					font-weight: 400;
				}

				p:nth-child(2) {
					@media screen and ( min-width: 660px ) {
						// css to allow for this element to exceed parent's width
						width: 152%; // 152% * 405px gets us to 615px which is the design spec
						position: relative;
						left: -26%; // shift position back by half of that so that it remains centered
					}
				}
			}

			fieldset.form-fieldset label.form-label {
				font-weight: 500;
				text-transform: uppercase;
				font-size: rem(11px);
				color: $gray-900;
			}
		}

		div.login__two-factor-footer {
			margin-top: 16px;
			p {
				margin-bottom: 0;
				color: $woo-label-color;
				font-size: rem(14px);
				line-height: 24px;
				letter-spacing: -0.1px;

				a {
					color: var(--wp-admin-theme-color);
					font-size: rem(14px);
					line-height: 24px;
					letter-spacing: -0.1px;
				}
			}
		}

		span.social-buttons__service-name {
			font-weight: 600;
		}

		.jetpack-connect__logged-in-content {
			@media screen and ( max-width: 660px ) {
				padding-left: $woo-form-whitespace-660;
				padding-right: $woo-form-whitespace-660;
			}
		}

		.jetpack-connect__features_wrapper {
			@media screen and ( max-width: 660px ) {
				display: none !important;
			}
		}

		.signup-form {
			padding-top: 24px;
		}

		// Log in link on signup page
		.login__header-subtitle a,
		.formatted-header__subtitle a {
			color: var(--wp-admin-theme-color);
			line-height: inherit;
		}

		.form-input-validation {
			padding: 8px 0 11px;

			p,
			a {
				line-height: 16px;
			}

			// Hide form validation icon
			svg {
				display: none;
			}
		}

		// Lost password
		.login__lostpassword-form {
			display: flex;
			flex-direction: column;
			padding: 48px 24px 32px;

			@media screen and ( max-width: 660px ) {
				padding: 32px 16px 28px;
			}

			.login__form-action {
				margin-top: 24px;
			}

			input[type="email"].form-text-input {
				margin-bottom: 0;
			}
			.form-input-validation {
				padding-bottom: 0;
			}
		}

		.login__lostpassword-subtitle a {
			line-height: inherit;
		}
	}
}
